title: Class prerequisites
tagline: Meet all the prerequisites for an upcoming class
description: Meet all the prerequisites for an upcoming class
template:
  name: prerequisites
  repo: false
before:
- type: createIssue
  title: Supported browser
  body: browser.md
  action_id: browserIssue
- type: createIssue
  title: Welcome
  body: welcome.md
  data:
    url: '%actions.browserIssue.data.html_url%'

# Repo artifacts:
# 1. Issue: Welcome
# 2. Issue: Supported browser
# 3. Issue: Locate your shell
# 4. Issue: Install Git
# 5. Issue: Try a clone
# 6. Issue: Try a push
# 7. Issue: Pick a text editor

steps:

# 1
- title: Use a supported browser
  description: Use a supported browser
  event: issue_comment.created
  actions:
  - type: gate
    left: '%payload.issue.title%'
    operator: ===
    right: Supported browser
  - type: gate
    left: '/done|bypass/gim'
    operator: test
    right: '%payload.comment.body%'
  - type: createIssue
    title: Locate your shell
    body: shell.md
    action_id: shellIssue
  - type: respond
    with: goto.md
    data:
      url: '%actions.shellIssue.data.html_url%'


# 2
- title: Locate your shell
  description: Locate your shell
  event: issue_comment.created
  actions:
  - type: gate
    left: '%payload.issue.title%'
    operator: ===
    right: Locate your shell
  - type: gate
    left: '/done|bypass/gim'
    operator: test
    right: '%payload.comment.body%'
  - type: createIssue
    title: Install Git
    body: check-git.md
    action_id: gitIssue
  - type: respond
    with: goto.md
    data:
      url: '%actions.gitIssue.data.html_url%'


# 3
- title: Check for Git
  description: Check for Git
  event: issue_comment.created
  actions:
  - type: gate
    left: '%payload.issue.title%'
    operator: ===
    right: Install Git
  - type: gate
    gates:
    - left: '/done|bypass/gim'
      operator: test
      right: '%payload.comment.body%'
    - left: '/[2-9]+\.\d+\.\d+/gm'
      operator: test
      right: '%payload.comment.body%'
    else:
    - type: respond
      with: no-version.md
  - type: createIssue
    title: Try a clone
    body: try-clone.md
    data:
      cloneURL: '%payload.repository.clone_url%'
    action_id: cloneIssue
  - type: respond
    with: version-success.md
    data:
      url: '%actions.cloneIssue.data.html_url%'

# 4
- title: Clone the repository
  description: Clone the respository
  event: issue_comment.created
  actions:
  - type: gate
    left: '%payload.issue.title%'
    operator: ===
    right: Try a clone
  - type: gate
    gates:
    - left: '/You appear to have cloned an empty repository./gm'
      operator: test
      right: '%payload.comment.body%'
    - left: '/, done./gm'
      operator: test
      right: '%payload.comment.body%'
    - left: '/done|bypass/gim'
      operator: test
      right: '%payload.comment.body%'
    else:
    - type: respond
      with: no-clone.md
  - type: createIssue
    title: Try a push
    body: push.md
    action_id: cloneIssue
  - type: respond
    with: cloned.md
    data:
      url: '%actions.cloneIssue.data.html_url%'
  

# 5
- title: Push to the repository
  description: Push to the repository
  event: issue_comment.created
  actions:
  - type: gate
    left: '%payload.issue.title%'
    operator: ===
    right: Try a push
  - type: gate
    gates:
    - left: '/Writing objects: \d+%.*, done/gm'
      operator: test
      right: '%payload.comment.body%'
    - left: '/done|bypass/gim'
      operator: test
      right: '%payload.comment.body%'
    else:
    - type: respond
      with: proxy.md
  - type: createIssue
    title: Pick a text editor
    body: editor.md
    action_id: editorIssue
  - type: respond
    with: pushed.md
    data:
      url: '%actions.editorIssue.data.html_url%'

# 6
- title: Use a recommended text editor
  description: Use a recommended text editor
  event: issue_comment.created
  actions:
  - type: gate
    left: '%payload.issue.title%'
    operator: ===
    right: Pick a text editor
  - type: createIssue
    title: Congratulations
    body: congratulations.md
    action_id: congratulationsIssue
  - type: respond
    with: goto.md
    data:
      url: '%actions.congratulationsIssue.data.html_url%'